#include <iostream>
#include <algorithm> 
#include <ranges>
#include "mes.hpp"

namespace mes
{
	const script_info script_info::infos[]
	{  /*  name         offtype  version   uint8x2         uint8str        string          encstr          uint16x4      enckey  output strings... */
		{ "ffexa"     , offset1, 0x7B69, { 0x00, 0x28 }, { 0x29, 0x2E }, { 0x2F, 0x49 }, { 0x4A, 0x4D }, { 0x4E, 0xFF },  0x20, { 0x43 }/*---------*/}, // fortissimo//Akkord:Bsusvier
		{ "ffexs"     , offset1, 0x7B6B, { 0x00, 0x28 }, { 0x29, 0x2E }, { 0x2F, 0x4B }, { 0x4c, 0x4F }, { 0x50, 0xFF },  0x20, { 0x35, 0x43, 0x45 } }, // fortissimo EXS//Akkord:nächsten Phase
		{ "ef"        , offset1, 0x466A, { 0x00, 0x28 }, { 0x2A, 0x2F }, { 0x30, 0x4A }, { 0x4B, 0x4E }, { 0x4F, 0xFF },  0x20, { 0x36, 0x46 }/*---*/}, // エターナルファンタジー Eternal Fantasy
		{ "dcxx"      , offset1, 0x005D, { 0x00, 0x2B }, { 0xFF, 0xFF }, { 0x2C, 0x45 }, { 0x46, 0x49 }, { 0x4A, 0xFF },  0x20, { 0x42 }/*---------*/}, // D.C.〜ダ・カーポ〜　温泉編、MEMORIES DISC
		{ "dcmems"    , offset1, 0x0062, { 0x00, 0x2E }, { 0xFF, 0xFF }, { 0x2F, 0x49 }, { 0x4A, 0x4D }, { 0x4E, 0xFF },  0x20, { 0x45 }/*---------*/}, // D.C. ～ダ・カーポ～ 感謝ぱっく D.C. MEMORIES DISC
		{ "ktlep"     , offset1, 0x6E69, { 0x00, 0x28 }, { 0x29, 0x2E }, { 0x2F, 0x49 }, { 0x4A, 0x4D }, { 0x4E, 0xFF },  0x20, { 0x45 }/*---------*/}, // ことり Love Ex P
		{ "dcws0"     , offset1, 0x005C, { 0x00, 0x2B }, { 0xFF, 0xFF }, { 0x2C, 0x45 }, { 0x46, 0x49 }, { 0x4A, 0xFF },  0x20, { 0x42, 0x44 }/*---*/}, // D.C. White Season ~ダ・カーポ ホワイトシーズン~ クリスマス限定版
		{ "dcws"      , offset1, 0x656C, { 0x00, 0x2B }, { 0x2C, 0x31 }, { 0x32, 0x4C }, { 0x4D, 0x50 }, { 0x51, 0xFF },  0x20, { 0x46, 0x48 }/*---*/}, // D.C. White Season（D.C.～ダ・カーポ～アーカイブス　SAKURA Edition）
		{ "dcsv"      , offset1, 0x636C, { 0x00, 0x2B }, { 0x2C, 0x31 }, { 0x32, 0x4C }, { 0x4D, 0x50 }, { 0x51, 0xFF },  0x20, { 0x46 }/*---------*/}, // D.C. Summer Vacation～ダ・カーポ サマーバケーション～ 
		{ "dcpc"      , offset1, 0x3D63, { 0x00, 0x2C }, { 0xFF, 0xFF }, { 0x2D, 0x49 }, { 0x4A, 0x4D }, { 0x4E, 0xFF },  0x20, { 0x44 }/*---------*/}, // Ｄ．Ｃ．Ｐ．Ｃ．(Vista)
		{ "dcdx"      , offset1, 0x7769, { 0x00, 0x28 }, { 0x29, 0x2E }, { 0x2F, 0x49 }, { 0x4A, 0x4D }, { 0x4E, 0xFF },  0x20, { 0x35, 0x45 }/*---*/}, // D.C.Dream X’mas～ダ・カーポ～ドリームクリスマス
		{ "dcas"      , offset1, 0x4E69, { 0x00, 0x28 }, { 0x29, 0x2E }, { 0x2F, 0x49 }, { 0x4A, 0x4D }, { 0x4E, 0xFF },  0x20, { 0x43 }/*---------*/}, // D.C.A.S. 〜ダ・カーポ〜アフターシーズンズ
		{ "dcbs"      , offset1, 0x3166, { 0x00, 0x2E }, { 0xFF, 0xFF }, { 0x2F, 0x4B }, { 0x4C, 0x4F }, { 0x50, 0xFF },  0x20, { 0x48 }/*---------*/}, // D.C.II ～ダ・カーポII～ 春風のアルティメットバトル!
		{ "dc2fl"     , offset1, 0x9C69, { 0x00, 0x28 }, { 0x29, 0x2E }, { 0x2F, 0x49 }, { 0x4A, 0x4D }, { 0x4E, 0xFF },  0x20, { 0x35, 0x45 }/*---*/}, // D.C.II Fall in Love ～ダ・カーポII～フォーリンラブ
		{ "dc2bs"     , offset1, 0x316C, { 0x00, 0x2B }, { 0x2C, 0x31 }, { 0x32, 0x4C }, { 0x4D, 0x50 }, { 0x51, 0xFF },  0x20, { 0x48 }/*---------*/}, // D.C.II ～ダ・カーポII～ 春風のアルティメットバトル! （D.C.～ダ・カーポ～アーカイブス　SAKURA Edition）
		{ "dc2dm"     , offset2, 0x9D72, { 0x00, 0x29 }, { 0x2A, 0x31 }, { 0x32, 0x4C }, { 0x4D, 0x50 }, { 0x51, 0xFF },  0x20, { 0x44 }/*---------*/}, // D.C.II Dearest Marriage ～ダ・カーポII～ ディアレストマリッジ
		{ "dc2fy"     , offset1, 0x3866, { 0x00, 0x2E }, { 0xFF, 0xFF }, { 0x2F, 0x4B }, { 0x4C, 0x4F }, { 0x50, 0xFF },  0x20, { 0x48 }/*---------*/}, // D.C. II ~Featuring Yun2!~
		{ "dc2cckko"  , offset1, 0x026C, { 0x00, 0x2B }, { 0x2C, 0x31 }, { 0x32, 0x4C }, { 0x4D, 0x50 }, { 0x51, 0xFF },  0x20, {/*——*/}/*---------*/}, // D.C.II Character Collection ～ダ・カーポII～ キャラクターコレクション 月島小恋のらぶらぶバスルーム
		{ "dc2cckko"  , offset1, 0xA96C, { 0x00, 0x2B }, { 0x2C, 0x31 }, { 0x32, 0x4C }, { 0x4D, 0x50 }, { 0x51, 0xFF },  0x20, {/*——*/}/*---------*/}, // D.C.II Character Collection ～ダ・カーポII～ キャラクターコレクション 月島小恋のらぶらぶバスルーム（D.C.～ダ・カーポ～アーカイブス　SAKURA Edition）
		{ "dc2ccotm"  , offset1, 0x016C, { 0x00, 0x2B }, { 0x2C, 0x31 }, { 0x32, 0x4C }, { 0x4D, 0x50 }, { 0x51, 0xFF },  0x20, {/*——*/}/*---------*/}, // D.C.II Character Collection ～ダ・カーポII～ キャラクターコレクション 音姫先生のどきどき特別授業 
		{ "dc2ccotm"  , offset1, 0xA86C, { 0x00, 0x2B }, { 0x2C, 0x31 }, { 0x32, 0x4C }, { 0x4D, 0x50 }, { 0x51, 0xFF },  0x20, {/*——*/}/*---------*/}, // D.C.II Character Collection ～ダ・カーポII～ キャラクターコレクション 音姫先生のどきどき特別授業（D.C.～ダ・カーポ～アーカイブス　SAKURA Edition）
		{ "dc2sc"     , offset1, 0x3B69, { 0x00, 0x28 }, { 0x29, 0x2E }, { 0x2F, 0x49 }, { 0x4A, 0x4D }, { 0x4E, 0xFF },  0x20, { 0x45 }/*---------*/}, // D.C.II Spring Celebration ～ダ・カーポII～ スプリング セレブレイション
		{ "dc2ty"     , offset1, 0x5F69, { 0x00, 0x28 }, { 0x29, 0x2E }, { 0x2F, 0x49 }, { 0x4A, 0x4D }, { 0x4E, 0xFF },  0x20, { 0x45 }/*---------*/}, // D.C.II To You ～ダ・カーポII～トゥーユー サイドエピソード
		{ "dc2pc"     , offset1, 0x5769, { 0x00, 0x28 }, { 0x29, 0x2E }, { 0x2F, 0x49 }, { 0x4A, 0x4D }, { 0x4E, 0xFF },  0x20, { 0x45 }/*---------*/}, // D.C.II P.C.～ダ・カーポII～
		{ "dc2pc"     , offset1, 0x9969, { 0x00, 0x28 }, { 0x29, 0x2E }, { 0x2F, 0x49 }, { 0x4A, 0x4D }, { 0x4E, 0xFF },  0x20, { 0x45 }/*---------*/}, // D.C.II P.C.～ダ・カーポII～
		{ "dc3rx"     , offset2, 0x9772, { 0x00, 0x2B }, { 0x2C, 0x33 }, { 0x34, 0x4E }, { 0x4F, 0x52 }, { 0x53, 0xFF },  0x20, { 0x45 }/*---------*/}, // D.C.III R ～ダ・カーポIIIアール～X-rated
		{ "dc3pp"     , offset2, 0x9872, { 0x00, 0x2A }, { 0x2B, 0x32 }, { 0x33, 0x4E }, { 0x4F, 0x51 }, { 0x52, 0xFF },  0x20, { 0x45 }/*---------*/}, // D.C.III P.P. ～ダ・カーポIII プラチナパートナー～
		{ "dc3wy"     , offset2, 0xA09F, { 0x00, 0x38 }, { 0x39, 0x41 }, { 0x42, 0x5F }, { 0x60, 0x63 }, { 0x64, 0xFF },  0x20, { 0x55 }/*---------*/}, // D.C.III With You ～ダ・カーポIII～ ウィズユー
		{ "dc3dd"     , offset2, 0xA5A8, { 0x00, 0x38 }, { 0x39, 0x43 }, { 0x44, 0x62 }, { 0x63, 0x67 }, { 0x68, 0xFF },  0x20, { 0x58 }/*---------*/}, // D.C.Ⅲ DreamDays～ダ・カーポⅢ～ドリームデイズ
		{ "dc4"       , offset2, 0xAAB6, { 0x00, 0x3A }, { 0x3B, 0x47 }, { 0x48, 0x68 }, { 0x69, 0x6D }, { 0x6E, 0xFF },  0x20, { 0x5D }/*---------*/}, // D.C.4 ～ダ・カーポ4～
		{ "dc4ph"     , offset2, 0xABB6, { 0x00, 0x3A }, { 0x3B, 0x47 }, { 0x48, 0x68 }, { 0x69, 0x6D }, { 0x6E, 0xFF },  0x20, { 0x5D }/*---------*/}, // D.C.4 Plus Harmony ～ダ・カーポ4～ プラスハーモニー 
		{ "ds"        , offset2, 0x9F9A, { 0x00, 0x38 }, { 0x39, 0x4A }, { 0x41, 0x5E }, { 0x5F, 0x62 }, { 0x63, 0xFF },  0x20, { 0x54 }/*---------*/}, // D.S. -Dal Segno-
		{ "dsif"      , offset2, 0xA1A1, { 0x00, 0x39 }, { 0x3A, 0x42 }, { 0x43, 0x60 }, { 0x61, 0x64 }, { 0x65, 0xFF },  0x20, { 0x56 }/*---------*/}, // D.S. i.F. -Dal Segno- in Future
		{ "tmpl"      , offset2, 0xA6B4, { 0x00, 0x3B }, { 0x3A, 0x46 }, { 0x46, 0x67 }, { 0x68, 0x6E }, { 0x6D, 0xFF },  0x20, { 0x5C }/*---------*/}, // てんぷれっ!!
		{ "nightshade", offset2, 0x0871, { 0x00, 0x2B }, { 0x2C, 0x33 }, { 0x34, 0x4E }, { 0x4F, 0x52 }, { 0x53, 0xFF },  0x01, { 0x43 }/*---------*/}, // 百花百狼 戦国忍法帖
		{ "puripa"    , offset1, 0x5B6C, { 0x00, 0x28 }, { 0x29, 0x2F }, { 0x30, 0x4A }, { 0x4B, 0x4E }, { 0x4F, 0xFF },  0x20, { 0x44, 0x46 }/*---*/}, // Princess Party ～プリンセスパーティー～
		{ "uni"       , offset1, 0x746A, { 0x00, 0x29 }, { 0x2A, 0x2F }, { 0x30, 0x4A }, { 0x4B, 0x4E }, { 0x4F, 0xFF },  0x20, { 0x36, 0x46 }/*---*/}, // ユニ uni.
		{ "homemaid"  , offset1, 0x1A63, { 0x00, 0x2B }, { 0xFF, 0xFF }, { 0x2C, 0x48 }, { 0x49, 0x4C }, { 0x4D, 0xFF },  0x20, { 0x31 }/*---------*/}, // ホームメイド -Home maid-
		{ "hmsw"      , offset1, 0x4F69, { 0x00, 0x28 }, { 0x29, 0x2E }, { 0x2F, 0x49 }, { 0x4A, 0x4D }, { 0x4E, 0xFF },  0x20, { 0x35, 0x45 }/*---*/}, // ホームメイド スイーツ
		{ "ag2dc"     , offset1, 0x7C6A, { 0x00, 0x29 }, { 0x2A, 0x2F }, { 0x30, 0x4A }, { 0x4B, 0x4E }, { 0x4F, 0xFF },  0x20, { 0x36, 0x46 }/*---*/}, // A.G.II.D.C.　～あるぴじ学園2.0　サーカス史上最大の危機！？～
		{ "gadejude"  , offset1, 0x005F, { 0x00, 0x2B }, { 0xFF, 0xFF }, { 0x2C, 0x46 }, { 0x47, 0x4A }, { 0x4B, 0xFF },  0x20, {/*--*/}/*---------*/}, // ガッデーム＆ジュテーム
		{ "sukumizu"  , offset1, 0x005F, { 0x00, 0x2B }, { 0xFF, 0xFF }, { 0x2C, 0x46 }, { 0x47, 0x4A }, { 0x4B, 0xFF },  0x20, { 0x31, 0x44 }/*---*/}, // すくみず～フェチ☆になるもんっ！～
		{ "sukumizu2" , offset1, 0x2B63, { 0x00, 0x2B }, { 0xFF, 0xFF }, { 0x2C, 0x48 }, { 0x49, 0x4C }, { 0x4D, 0xFF },  0x20, { 0x45 }/*---------*/}, // すくみず2 ～泳・げ・な・い～ 
		{ "suika"     , offset1, 0x005F, { 0x00, 0x2B }, { 0xFF, 0xFF }, { 0x2C, 0x46 }, { 0x47, 0x4A }, { 0x4B, 0xFF },  0x20, { 0x42, 0x44 }/*---*/}, // 水夏 ~SUIKA~全年齢版、水夏 ~SUIKAおー・157章~
		{ "suikaas+"  , offset1, 0x2263, { 0x00, 0x2B }, { 0xFF, 0xFF }, { 0x2C, 0x48 }, { 0x49, 0x4C }, { 0x4D, 0xFF },  0x20, { 0x45 }/*---------*/}, // 水夏A.S+ ～アズプラス～
		{ "suika2"    , offset1, 0x8279, { 0x00, 0x2E }, { 0x2F, 0x36 }, { 0x37, 0x54 }, { 0x55, 0x57 }, { 0x58, 0xFF },  0x20, { 0x4C }/*---------*/}, // 水夏弐律
		{ "tyakata1"  , offset1, 0x1561, { 0x00, 0x2C }, { 0xFF, 0xFF }, { 0x2D, 0x48 }, { 0x49, 0x4C }, { 0x4D, 0xFF },  0x20, { 0x44, 0x46 }/*---*/}, // 終の館 ～恋文～
		{ "tyakata2"  , offset1, 0x1661, { 0x00, 0x2C }, { 0xFF, 0xFF }, { 0x2D, 0x48 }, { 0x49, 0x4C }, { 0x4D, 0xFF },  0x20, { 0x44, 0x46 }/*---*/}, // 終の館～双ツ星～
		{ "tyakata3"  , offset1, 0x1761, { 0x00, 0x2C }, { 0xFF, 0xFF }, { 0x2D, 0x48 }, { 0x49, 0x4C }, { 0x4D, 0xFF },  0x20, { 0x44, 0x46 }/*---*/}, // 終の館～罪と罰～
		{ "tyakata4"  , offset1, 0x1961, { 0x00, 0x2C }, { 0xFF, 0xFF }, { 0x2D, 0x48 }, { 0x49, 0x4C }, { 0x4D, 0xFF },  0x20, { 0x44, 0x46 }/*---*/}, // 終の館 ～人形～
		{ "ariespd"   , offset1, 0x1C62, { 0x00, 0x2D }, { 0xFF, 0xFF }, { 0x2E, 0x49 }, { 0x4A, 0x4D }, { 0x4E, 0xFF },  0x20, {/*--*/}/*---------*/}, // Aries Pure Dream
		{ "ariesld"   , offset1, 0x1D62, { 0x00, 0x2D }, { 0xFF, 0xFF }, { 0x2E, 0x49 }, { 0x4A, 0x4D }, { 0x4E, 0xFF },  0x20, {/*--*/}/*---------*/}, // Aries Love Dream
		{ "sakura"    , offset1, 0x2863, { 0x00, 0x2B }, { 0xFF, 0xFF }, { 0x2C, 0x48 }, { 0x49, 0x4C }, { 0x4D, 0xFF },  0x20, { 0x45 }/*---------*/}, // SAKURA ～雪月華～
		{ "sakurasd"  , offset1, 0x2963, { 0x00, 0x2B }, { 0xFF, 0xFF }, { 0x2C, 0x48 }, { 0x49, 0x4C }, { 0x4D, 0xFF },  0x20, {/*--*/}/*---------*/}, // SAKURA ～雪月華～ SD版
		{ "mhpc"      , offset1, 0x3568, { 0x00, 0x28 }, { 0x29, 0x2D }, { 0x2E, 0x48 }, { 0x49, 0x4C }, { 0x4D, 0xFF },  0x20, { 0x44, 0x34 }/*---*/}, // 舞-HiME 運命の系統樹 修羅
		{ "tworld"    , offset1, 0x3766, { 0x00, 0x2E }, { 0xFF, 0xFF }, { 0x2F, 0x4B }, { 0x4C, 0x4F }, { 0x50, 0xFF },  0x20, { 0x38 }/*---------*/}, // TrueWorld～真実のセカイ～
		{ "cdcd"      , offset1, 0x3963, { 0x00, 0x2B }, { 0xFF, 0xFF }, { 0x2C, 0x48 }, { 0x49, 0x4C }, { 0x4D, 0xFF },  0x20, { 0x45, 0x31 }/*---*/}, // C.D. Christmas Days ～サーカスディスク クリスマスデイズ～
		{ "cdcd2"     , offset1, 0x4D69, { 0x00, 0x29 }, { 0x29, 0x2E }, { 0x2F, 0x49 }, { 0x4A, 0x4D }, { 0x4E, 0xFF },  0x20, { 0x45 }/*---------*/}, // C.D.C.D.2 ～シーディーシーディー2～
		{ "cland1"    , offset1, 0x4363, { 0x00, 0x2B }, { 0xFF, 0xFF }, { 0x2C, 0x48 }, { 0x49, 0x4C }, { 0x4D, 0xFF },  0x20, { 0x31 }/*---------*/}, // CircusLand Ⅰ
		{ "natuiro"   , offset1, 0x6D6C, { 0x00, 0x2B }, { 0x2C, 0x31 }, { 0x32, 0x4C }, { 0x4D, 0x50 }, { 0x51, 0xFF },  0x20, {/*--*/}/*---------*/}, // 紙ヒコーキ（まじかるぼっくす2009 祭・冬一番）
		{ "biscuit"   , offset1, 0x6D6C, { 0x00, 0x2B }, { 0x2C, 0x31 }, { 0x32, 0x4C }, { 0x4D, 0x50 }, { 0x51, 0xFF },  0x20, { 0x47 }/*---------*/}, // ビスケット（まじかるぼっくす2009 祭・冬一番）
		{ "alba"      , offset1, 0x6D6C, { 0x00, 0x2B }, { 0x2C, 0x31 }, { 0x32, 0x4C }, { 0x4D, 0x50 }, { 0x51, 0xFF },  0x20, { 0x38 }/*---------*/}, // ALBA ~Dawn of This Life~（まじかるぼっくす2009 祭・冬一番）
		{ "mtbr"      , offset1, 0x6D6C, { 0x00, 0x2B }, { 0x2C, 0x31 }, { 0x32, 0x4C }, { 0x4D, 0x50 }, { 0x51, 0xFF },  0x20, { 0x38 }/*---------*/}, // めてぶれ（まじかるぼっくす2009 祭・冬一番）
		{ "shimai"    , offset1, 0x6D69, { 0x00, 0x28 }, { 0x29, 0x2E }, { 0x2F, 0x49 }, { 0x4A, 0x4D }, { 0x4E, 0xFF },  0x20, {/*--*/}/*---------*/}, // しまイチャ（まじかるぼっくす2009 祭・冬一番）
		{ "diceki"    , offset1, 0x6D6A, { 0x00, 0x29 }, { 0x2A, 0x2F }, { 0x30, 0x4A }, { 0x4B, 0x4E }, { 0x4F, 0xFF },  0x20, {/*--*/}/*---------*/}, // ダイスき（まじかるぼっくす2009 祭・冬一番）
		{ "hrk"       , offset1, 0x6D6F, { 0x00, 0x2B }, { 0x2C, 0x32 }, { 0x33, 0x4D }, { 0x4E, 0x51 }, { 0x52, 0xFF },  0x20, { 0x47 }/*---------*/}, // はるか～Ｈａ・Ｒｕ・Ｋａ～（まじかるぼっくす2009 祭・冬一番）
		{ "tpsk1"     , offset1, 0x796A, { 0x00, 0x28 }, { 0x29, 0x2E }, { 0x2F, 0x4A }, { 0x4B, 0x4E }, { 0x4F, 0xFF },  0x20, {/*--*/}/*---------*/}, // T.P.さくら ～タイムパラディンさくら～ 前編
		{ "tpsk2"     , offset1, 0x7A6A, { 0x00, 0x28 }, { 0x29, 0x2E }, { 0x2F, 0x4A }, { 0x4B, 0x4E }, { 0x4F, 0xFF },  0x20, {/*--*/}/*---------*/}, // T.P.さくら ～タイムパラディンさくら～ 後編
		{ "arpg0"     , offset1, 0x6F6A, { 0x00, 0x29 }, { 0x2A, 0x2F }, { 0x30, 0x4A }, { 0x4B, 0x4E }, { 0x4F, 0xFF },  0x20, { 0x46 }/*---------*/}, // あるぴじ学園
		{ "arpg1"     , offset1, 0x756A, { 0x00, 0x29 }, { 0x2A, 0x2F }, { 0x30, 0x4A }, { 0x4B, 0x4E }, { 0x4F, 0xFF },  0x20, { 0x46 }/*---------*/}, // あるぴじ学園１．５
		{ "sl"        , offset2, 0xA4A6, { 0x00, 0x39 }, { 0x3A, 0x42 }, { 0x43, 0x62 }, { 0x63, 0x67 }, { 0x68, 0xFF },  0x20, {/*--*/}/*---------*/}, // スペースライブ Space Live - Advent of the Net Idols
		{ "renge"     , offset1, 0x4469, { 0x00, 0x28 }, { 0x29, 0x2E }, { 0x2F, 0x49 }, { 0x4A, 0x4D }, { 0x4E, 0xFF },  0x20, { 0x35 }/*---------*/}, // 恋夏 -れんげ-
		{ "ccamellia" , offset1, 0x676C, { 0x00, 0x28 }, { 0x29, 0x2F }, { 0x30, 0x4A }, { 0x4B, 0x4E }, { 0x4F, 0xFF },  0x20, { 0x44, 0x46 }/*---*/}, // Princess Party Camellia ～プリンセスパーティーカメリア～
	};

	const char* const advtxt_info::supports[]
	{
		"utaeho4", "infantaria"
	};

	const advtxt_info advtxt_info::infos[]
	{
		{ "advtxt" , { 0x00       } },  // default
		{ "utaeho4", { 0x00, 0x1A } }
	};

	[[maybe_unused]] static auto __script_info_init__ = []()
	{
		constexpr static const auto begin{ const_cast<script_info*>(script_info::infos) };
		std::ranges::sort(begin, begin + std::size(script_info::infos), std::greater{}, &script_info::version);
		return true;
	}();

	auto script_info::section::is(const uint8_t key) const noexcept -> bool
	{
		return !(beg == end && beg == 0xFF) && (key >= beg && key <= end);
	}

	auto script_info::operator=(const mes::script_info& other) -> script_info&
	{
		if (this != reinterpret_cast<const script_info*>(&other))
		{
			std::memcpy(this, &other, sizeof(script_info));
		}
		return *this;
	}

	auto script_info::query(const std::span<uint8_t> data) -> const script_info* const
	{
		if (!data.data() || data.empty())
		{
			return nullptr;
		}

		const size_t   size{ data.size() };
		const int32_t* head{ reinterpret_cast<int32_t*>(data.data()) };

		uint16_t version1{}, version2{};
		if (size > 4)
		{
			const int32_t offset1{ head[0] * 0x04 + 0x04 };
			const int32_t offset2{ head[0] * 0x06 + 0x04 };

			if (size > offset1 + 0x02)
			{
				version1 = *reinterpret_cast<uint16_t*>(data.data() + offset1);
			}
			if (size > offset2 + 0x02)
			{
				version2 = *reinterpret_cast<uint16_t*>(data.data() + offset2);
			}
		}

		if (version1 == 0x00 && version2 == 0x00)
		{
			return nullptr;
		}

		for (const auto& info : script_info::infos)
		{
			switch (info.offset)
			{
			case script_info::offset1:
			{
				if (version1 == 0x00)
				{
					continue;
				}
				if ((info.version & 0xFF00) == 0x00)
				{
					if ((version1 & 0xFF) == info.version)
					{
						return &info;
					}
				}
				else if (info.version == version1)
				{
					return &info;
				}
				continue;
			}
			case script_info::offset2:
			{
				if (version2 == 0x00)
				{
					continue;
				}
				if (head[1] == 0x03 && info.version == version2)
				{
					return &info;
				}
				continue;
			}
			};
		}

		return nullptr;
	}

	auto script_info::query(const std::string_view name) -> const script_info* const
	{
		if (!name.empty())
		{
			for (const auto& info : script_info::infos)
			{
				if (name == info.name) return &info;
			}
		}
		return nullptr;
	}

	auto script_info::query(const uint16_t version) -> const script_info* const
	{
		for (const auto& info : script_info::infos)
		{
			if (version == info.version) return &info;
		}
		return nullptr;
	}
}